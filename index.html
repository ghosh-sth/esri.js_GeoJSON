<!DOCTYPE html>   <!-- "helloesri.js" code used as template -->

<html>

  <head>

    <meta charset="utf-8" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <title>Displaying GeoJSON data</title>
    
    <style>
      html,
      body,
      #viewDiv {
        padding: 0;
        margin: 0;
        height: 100%;
        width: 100%;
      }
    </style>
    
    <link rel="stylesheet" href="https://js.arcgis.com/4.29/esri/themes/dark/main.css">
   
    <script src="https://js.arcgis.com/4.29/"></script>
    
    <script>
        require(["esri/config","esri/Map","esri/layers/GeoJSONLayer","esri/views/MapView"], function(esriConfig,Map,GeoJSONLayer,MapView) {
            
            esriConfig.apiKey = "AAPKc7aaaa75c93648dfa8549f3f1a178f028HYltwEBVuXG_yIKyAFwQounw95_IRClbYiVn8dnai2vf1safpO1h1WXLguaj72r";  // API Key
            
            const url = "https://arcg.is/0T5WmL";  // url of the geoJSON
            
            const template = {
              title: "Population",
              content: "{} Million as of 2015",
              fieldInfos: [
                {
                  fieldName: 'Pop_2015'  // doesn't seem like this *needs* a format specified to work?
                }
              ]
            };  // template (from ArcGIS example)

            const renderer = {
              type: "simple",
              field: "Pop_2015",
              symbol: {
                type: "simple-marker",
                color: "orange",
                outline: {
                  color: "white"
                }
              },
              visualVariables: [{
                type: "size",
                field: "Pop_2015",
                stops: [{
                    value: 1,
                    size: "4px"
                  },
                  {
                    value: 50,
                    size: "40px"
                  }
                ]
              }]
            };  // renderer (from ArcGIS example)

            const geojsonlayer = new GeoJSONLayer({
                url: url,
                popupTemplate: template,
                renderer: renderer,
                orderBy: {
                  field: "Pop_2015"
                }
            }); // GeoJSON data
            
            const mymap = new Map({
                basemap: "arcgis/topographic", 
                layers: [geojsonlayer]  // need to remember to add the geoJSON layer :p
            });  // Map
            
            const view = new MapView({
                map: mymap,
                container: "viewDiv",
                center: [0,0],
                zoom: 3 
            });  // Map viewer

        });
    </script>

  </head>

  <body>
    <div id="viewDiv"></div>
  </body>

</html>